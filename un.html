<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>

    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: sans-serif;
            line-height: 1.5;
            margin: 0;
            padding: 0;
            display: flex;
        }

        /* Sidebar Navigation (Table of Contents) */
        .sidebar {
            position: fixed;
            left: 0;
            top: 0;
            width: 280px;
            height: 100vh;
            background: #2c3e50;
            color: white;
            overflow-y: auto;
            z-index: 1000;
            box-shadow: 2px 0 5px rgba(0, 0, 0, 0.1);
        }

        .sidebar-header {
            padding: 1.5rem 1rem;
            background: #34495e;
            border-bottom: 1px solid #4a5568;
        }

        .sidebar-title {
            font-size: 1.2rem;
            font-weight: bold;
            color: #61dafb;
            margin: 0;
        }

        .sidebar-subtitle {
            font-size: 0.9rem;
            color: #a0aec0;
            margin: 0.5rem 0 0 0;
        }

        .toc {
            padding: 1rem 0;
        }

        .toc-section {
            margin-bottom: 0.5rem;
        }

        .toc-main {
            display: block;
            padding: 0.75rem 1rem;
            color: #e2e8f0;
            text-decoration: none;
            font-weight: 600;
            border-left: 3px solid transparent;
            transition: all 0.2s ease;
        }

        .toc-main:hover {
            background: #4a5568;
            border-left-color: #61dafb;
            color: white;
        }

        .toc-main.active {
            background: #4a5568;
            border-left-color: #61dafb;
            color: #61dafb;
        }

        /* Toggle Button for Mobile */
        .sidebar-toggle {
            display: none;
            position: fixed;
            top: 1rem;
            left: 1rem;
            z-index: 1001;
            background: #2c3e50;
            color: white;
            border: none;
            padding: 0.5rem;
            border-radius: 4px;
            cursor: pointer;
        }

        /* Main Content */
        .main-content {
            margin-left: 280px;
            flex: 1;
            padding: 2rem;
            max-width: calc(100vw - 280px);
        }

        .container {
            max-width: 1000px;
            margin: 0 auto;
        }

        /* Section Styles */
        .section {
            margin-bottom: 3rem;
            padding: 2rem;
            border: 1px solid #eee;
            border-radius: 8px;
            background: white;
        }

        .section-header {
            background: linear-gradient(135deg, #61dafb, #21a9c7);
            color: white;
            padding: 1.5rem;
            margin: -2rem -2rem 2rem -2rem;
            border-radius: 8px 8px 0 0;
        }

        .section-title {
            font-size: 2rem;
            margin-bottom: 0.5rem;
        }

        .section-subtitle {
            opacity: 0.9;
            font-size: 1.1rem;
        }

        .lesson-content {
            margin-bottom: 2rem;
            padding: 1.5rem;
            border: 1px solid #e0e0e0;
            border-radius: 5px;
            background: #fafafa;
        }

        .lesson-content h2 {
            color: #333;
            margin-bottom: 1rem;
            padding-bottom: 0.5rem;
            border-bottom: 2px solid #61dafb;
        }

        code {
            background-color: #f4f4f4;
            padding: 0.2rem 0.4rem;
            border-radius: 3px;
            font-family: 'Courier New', monospace;
        }

        pre {
            background-color: #282c34;
            color: #abb2bf;
            padding: 1.5rem;
            overflow-x: auto;
            border-radius: 8px;
            margin: 1.5rem 0;
            border: 1px solid #3e4451;
            font-family: 'Fira Code', 'Monaco', 'Cascadia Code', 'Roboto Mono', monospace;
            font-size: 0.9rem;
            line-height: 1.6;
            white-space: pre-wrap;
            tab-size: 4;
            -moz-tab-size: 4;
            -o-tab-size: 4;
            word-wrap: break-word;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        }

        /* Ensure proper indentation display */
        pre code {
            display: block;
            white-space: pre-wrap;
        }

        pre code {
            background-color: transparent;
            color: inherit;
            padding: 0;
            border-radius: 0;
        }

        /* Syntax highlighting for code blocks */
        pre .keyword {
            color: #c678dd;
            font-weight: bold;
        }

        pre .string {
            color: #98c379;
        }

        pre .comment {
            color: #5c6370;
            font-style: italic;
        }

        pre .function {
            color: #61afef;
        }

        pre .variable {
            color: #e06c75;
        }

        pre .tag {
            color: #e06c75;
        }

        pre .attribute {
            color: #d19a66;
        }

        blockquote {
            border-left: 4px solid #61dafb;
            padding-left: 1rem;
            margin: 1rem 0;
            background: #f0f8ff;
            padding: 1rem;
            border-radius: 0 5px 5px 0;
            color: #555;
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .sidebar {
                transform: translateX(-100%);
                transition: transform 0.3s ease;
            }

            .sidebar.open {
                transform: translateX(0);
            }

            .sidebar-toggle {
                display: block;
            }

            .main-content {
                margin-left: 0;
                max-width: 100vw;
                padding: 1rem;
                padding-top: 4rem;
            }
        }

        /* Smooth scrolling */
        html {
            scroll-behavior: smooth;
        }

        /* Scrollbar styling for sidebar */
        .sidebar::-webkit-scrollbar {
            width: 6px;
        }

        .sidebar::-webkit-scrollbar-track {
            background: #2c3e50;
        }

        .sidebar::-webkit-scrollbar-thumb {
            background: #4a5568;
            border-radius: 3px;
        }

        .sidebar::-webkit-scrollbar-thumb:hover {
            background: #5a6578;
        }
    </style>
</head>

<body>
    <!-- Mobile Toggle Button -->
    <button class="sidebar-toggle" onclick="toggleSidebar()">☰</button>

    <!-- Sidebar Navigation (Table of Contents) -->
    <nav class="sidebar" id="sidebar">
        <div class="sidebar-header">
            <h1 class="sidebar-title">React Complete Guide</h1>
            <p class="sidebar-subtitle">Complete Guide to React v9</p>
        </div>

        <div class="toc">
            <div class="toc-section">
                <a href="#introduction" class="toc-main">1. Pure React Introduction</a>
            </div>

            <div class="toc-section">
                <a href="#vite-setup" class="toc-main">2. Vite Build Tool Setup</a>
            </div>

            <div class="toc-section">
                <a href="#jsx" class="toc-main">3. JSX Syntax</a>
            </div>

            <div class="toc-section">
                <a href="#hooks" class="toc-main">4. React Hooks</a>
            </div>

            <div class="toc-section">
                <a href="#effects" class="toc-main">5. useEffect Hook</a>
            </div>

            <div class="toc-section">
                <a href="#custom-hooks" class="toc-main">6. Custom Hooks</a>
            </div>
            <div class="toc-section">
                <a href="#user-input" class="toc-main">7. User Input</a>
            </div>
            <div class="toc-section">
                <a href="#context" class="toc-main">6. Context API</a>
            </div>
        </div>
    </nav>
    <!-- Main Content Area -->
    <main class="main-content">
        <div class="container">
            <!-- Introduction Section -->
            <section id="introduction" class="section">
                <div class="section-header">
                    <h1 class="section-title">Pure React Introduction</h1>
                    <p class="section-subtitle">Building React apps without compile steps</p>
                </div>
                <div class="lesson-content">
                    <p>
                        Let's start by writing pure React. No compile step. No JSX. No
                        Babel. No Webpack or Vite. Just some JavaScript on a page.
                    </p>
                    <p>
                        Let's start your project. Create your project directory inside
                        the repo. I'm going to call mine <code>padre-ginos</code> since
                        we're going to be building a pizza ordering system throughout
                        this course. Open that directory in VS Code or your editor of
                        choice. Create an index.html and add this markup:
                    </p>
                    <pre><code class="hljs language-html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"en"</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">"UTF-8"</span> /&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"viewport"</span> <span class="hljs-attr">content</span>=<span class="hljs-string">"width=device-width, initial-scale=1.0"</span> /&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>Padre Gino's<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"root"</span>&gt;</span>not rendered<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"https://unpkg.com/react@18.3.1/umd/react.development.js"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"https://unpkg.com/react-dom@18.3.1/umd/react-dom.development.js"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"./src/App.js"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span>
</code></pre>
                    <p>
                        Let's run this. We could open it directly in our browser but I
                        like using <a href="https://github.com/vercel/serve">serve</a>.
                        Run <code>npx serve</code> and open
                        <a href="http://localhost:3000/">http://localhost:3000/</a> in
                        your browser.
                    </p>
                    <ul>
                        <li>
                            Pretty standard HTML5 document. If this is confusing, I
                            teach another course called
                            <a href="https://frontendmasters.com/courses/web-development-v3/">Intro to Web Dev</a>
                            that can help you out.
                        </li>
                        <li>
                            We're adding a root div. We'll render our React app here in
                            a sec. It doesn't <em>have</em> to be called root, just a
                            common practice.
                        </li>
                        <li>
                            We have two script tags.
                            <ul>
                                <li>
                                    The first is the React library. This library is the
                                    interface of how to interact with React; all the
                                    methods (except one) will be via this library. It
                                    contains no way of rendering itself though; it's
                                    just the API.
                                </li>
                                <li>
                                    The second library is the rendering layer. Since
                                    we're rendering to the browser, we're using React
                                    DOM. There are other React libraries like React
                                    Native, React Unity, React Babylon.js, React Email,
                                    React Figma, React Blessed, and others. You need
                                    both script tags. The order is not important.
                                </li>
                            </ul>
                        </li>
                        <li>
                            The last script tag is where we're going to put our code.
                            You don't typically do this but I wanted to start as simple
                            as possible. This script tag must come <em>after</em> the
                            other two.
                        </li>
                    </ul>
                    <blockquote>
                        <p>
                            If you want to add some CSS right now,
                            <a href="https://github.com/btholt/citr-v9-project/blob/main/api/public/style.css">click
                                here</a>
                            to get the stylesheet for this course. Make a file called
                            styles.css and paste the previous file there. Then add a
                            link tag to your html file
                            <code>&lt;link rel="stylesheet" href="./style.css"
/&gt;</code>. We'll be linking to a CSS file located at
                            <code>/api/pubic/styles.css</code> a little later in the
                            course, but before we do that, we need to do some
                            configuration (during the Vite lesson).
                        </p>
                    </blockquote>
                    <p>
                        Make a new directory called <code>src</code> and a new file
                        called <code>App.js</code> in that directory and put this in
                        there.
                    </p>
                    <pre><code class="hljs language-javascript"><span class="hljs-keyword">const</span> <span class="hljs-title function_">App</span> = (<span class="hljs-params"></span>) =&gt; {
<span class="hljs-keyword">return</span> <span class="hljs-title class_">React</span>.<span class="hljs-title function_">createElement</span>(
<span class="hljs-string">"div"</span>,
{},
<span class="hljs-title class_">React</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">"h1"</span>, {}, <span class="hljs-string">"Pixel Perfect Pizzas"</span>)
);
};

<span class="hljs-keyword">const</span> container = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">"root"</span>);
<span class="hljs-keyword">const</span> root = <span class="hljs-title class_">ReactDOM</span>.<span class="hljs-title function_">createRoot</span>(container);
root.<span class="hljs-title function_">render</span>(<span class="hljs-title class_">React</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-title class_">App</span>));
</code></pre>
                    <p>This is about the simplest React app you can build.</p>
                    <ul>
                        <li>
                            The first thing we do is make our own component, App. React
                            is all about making components. And then taking those
                            components and making more components out of those.
                        </li>
                        <li>
                            There are two types of components, function components and
                            class components. This is a function component. We'll see
                            class components shortly.
                        </li>
                        <li>
                            A function component <em>must</em> return markup (which is
                            what <code>React.createElement</code> generates.)
                        </li>
                        <li>
                            These component render functions <em>have</em> to be fast.
                            This function is going to be called a lot. It's a hot code
                            path.
                        </li>
                        <li>
                            Inside of the render function, you cannot modify any sort of
                            state. Put in functional terms, this function must be pure.
                            You don't know how or when the function will be called so it
                            can't modify any ambient state.
                        </li>
                        <li>
                            <code>React.createElement</code> creates one
                            <em>instance</em> of some component. If you pass it a
                            <em>string</em>, it will create a DOM tag with that as the
                            string. We used <code>h1</code> and <code>div</code>, those
                            tags are output to the DOM. If we put
                            <code>x-custom-date-picker</code>, it'll output that (so web
                            components are possible too.)
                        </li>
                        <li>
                            The second empty object (you can put <code>null</code> too)
                            is attributes we're passing to the tag or component.
                            Whatever we put in this will be output to the element (like
                            id or style.)
                        </li>
                        <li>
                            First we're using <code>document.getElementById</code> to
                            grab an existing div out of the HTML document. Then we take
                            that element (which we called <code>container</code>) and
                            pass that into <code>ReactDOM.createRoot</code>. This is how
                            we signal to React where we want it to render our app. Note
                            later we can <code>root.render</code> again to change what
                            the root of our React app looks like (I rarely need to do
                            that.)
                        </li>
                        <li>
                            Notice we're using <code>React.createElement</code> with
                            <code>App</code> as a parameter to <code>root.render</code>.
                            We need an <em>instance</em> of <code>App</code> to render
                            out. <code>App</code> is a class of components and we need
                            to render one instance of a class. That's what
                            <code>React.createElement</code> does: it makes an instance
                            of a class. An analogy is that <code>App</code> as a
                            <em>class</em> of components is like Honda has a line of
                            cars called Civics. It's a whole line of cars with various
                            different options and parameters. An <em>instance</em> of a
                            Civic would be one individual car. It's a concrete instance
                            of the Civic car line.
                        </li>
                    </ul>
                    <blockquote>
                        <p>
                            ReactDOM.createRoot is a new API as of React v18. The old
                            <code>ReactDOM.render</code> is still available (and
                            deprecated) but it'll render your app in "legacy" mode which
                            won't use all the fun new features packed into React v18.
                        </p>
                    </blockquote>
                </div>

                <div class="lesson-content">
                    <p>
                        Now that we've done that, let's separate this out from a script
                        tag on the DOM to its own script file (best practice.)
                    </p>
                    <p>Modify your code in <code>App.js</code> so it looks like:</p>
                    <pre><code class="hljs language-javascript"><span class="hljs-keyword">const</span> <span class="hljs-title function_">Pizza</span> = (<span class="hljs-params"></span>) =&gt; {
<span class="hljs-keyword">return</span> <span class="hljs-title class_">React</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">"div"</span>, {}, [
<span class="hljs-title class_">React</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">"h1"</span>, {}, <span class="hljs-string">"The Pepperoni Pizza"</span>),
<span class="hljs-title class_">React</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">"p"</span>, {}, <span class="hljs-string">"Mozzarella Cheese, Pepperoni"</span>),
]);
};

<span class="hljs-keyword">const</span> <span class="hljs-title function_">App</span> = (<span class="hljs-params"></span>) =&gt; {
<span class="hljs-keyword">return</span> <span class="hljs-title class_">React</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">"div"</span>, {}, [
<span class="hljs-title class_">React</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">"h1"</span>, {}, <span class="hljs-string">"Pixel Perfect Pizzas"</span>),
<span class="hljs-title class_">React</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-title class_">Pizza</span>),
<span class="hljs-title class_">React</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-title class_">Pizza</span>),
<span class="hljs-title class_">React</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-title class_">Pizza</span>),
]);
};

<span class="hljs-keyword">const</span> container = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">"root"</span>);
<span class="hljs-keyword">const</span> root = <span class="hljs-title class_">ReactDOM</span>.<span class="hljs-title function_">createRoot</span>(container);
root.<span class="hljs-title function_">render</span>(<span class="hljs-title class_">React</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-title class_">App</span>));
</code></pre>
                    <blockquote>
                        <p>
                            🚨 You will be seeing a console warning
                            <code>Warning: Each child in a list should have a unique
"key" prop.</code>
                            in your browser console. React's dev warnings are trying to
                            help your code run faster. Basically, React tries to keep
                            track of components that are swapped in order. In a list, it
                            does that by you giving it a unique key it can track. If it
                            sees two things have swapped, it'll just move the components
                            instead of re-rendering.
                        </p>
                    </blockquote>
                    <ul>
                        <li>
                            To make an element have multiple children, just pass it an
                            array of elements.
                        </li>
                        <li>
                            We created a second new component, the
                            <code>Pizza</code> component. This component represents one
                            pizza. When you have distinct ideas represented as markup,
                            that's a good idea to separate that it into a component like
                            we did here.
                        </li>
                        <li>
                            Since we have a new <code>Pizza</code> component, we can use
                            it multiple times! We just use multiple calls to
                            <code>React.createElement</code>.
                        </li>
                        <li>
                            In <code>createElement</code>, the last two parameters are
                            optional. Since Pizza has no props or children (it could, we
                            just didn't make it use them yet) we can just leave them
                            off.
                        </li>
                    </ul>
                    <p>
                        Okay so we can have multiple pizzas but it's not a useful
                        component yet since not all pizza will be a pepperoni pizza.
                        Let's make it a bit more complicated.
                    </p>
                    <pre><code class="hljs language-javascript"><span class="hljs-keyword">const</span> <span class="hljs-title function_">Pizza</span> = (<span class="hljs-params">props</span>) =&gt; {
<span class="hljs-keyword">return</span> <span class="hljs-title class_">React</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">"div"</span>, {}, [
<span class="hljs-title class_">React</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">"h1"</span>, {}, props.<span class="hljs-property">name</span>),
<span class="hljs-title class_">React</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">"p"</span>, {}, props.<span class="hljs-property">description</span>),
]);
};

<span class="hljs-keyword">const</span> <span class="hljs-title function_">App</span> = (<span class="hljs-params"></span>) =&gt; {
<span class="hljs-keyword">return</span> <span class="hljs-title class_">React</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">"div"</span>, {}, [
<span class="hljs-title class_">React</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">"h1"</span>, {}, <span class="hljs-string">"Pixel Perfect Pizzas"</span>),
<span class="hljs-title class_">React</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-title class_">Pizza</span>, {
<span class="hljs-attr">name</span>: <span class="hljs-string">"The Pepperoni Pizza"</span>,
<span class="hljs-attr">description</span>: <span class="hljs-string">"Mozzarella Cheese, Pepperoni"</span>,
}),
<span class="hljs-title class_">React</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-title class_">Pizza</span>, {
<span class="hljs-attr">name</span>: <span class="hljs-string">"The Hawaiian Pizza"</span>,
<span class="hljs-attr">description</span>: <span class="hljs-string">"Sliced Ham, Pineapple, Mozzarella Cheese"</span>,
}),
<span class="hljs-title class_">React</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-title class_">Pizza</span>, {
<span class="hljs-attr">name</span>: <span class="hljs-string">"The Big Meat Pizza"</span>,
<span class="hljs-attr">description</span>: <span class="hljs-string">"Bacon, Pepperoni, Italian Sausage, Chorizo Sausage"</span>,
}),
]);
};

<span class="hljs-keyword">const</span> container = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">"root"</span>);
<span class="hljs-keyword">const</span> root = <span class="hljs-title class_">ReactDOM</span>.<span class="hljs-title function_">createRoot</span>(container);
root.<span class="hljs-title function_">render</span>(<span class="hljs-title class_">React</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-title class_">App</span>));

</code></pre>
                    <p>
                        Now we have a more flexible component that accepts props from
                        its parent. Props are variables that a parent (App) passes to
                        its children (the instances of Pizza.) Now each one can be
                        different! Now that is far more useful than it was since this
                        Pizza component can represent not just a pepperoni, but any
                        Pizza. This is the power of React! We can make multiple,
                        re-usable components. We can then use these components to build
                        larger components, which in turn make up yet-larger components.
                        This is how React apps are made!
                    </p>
                    <blockquote>
                        <p>
                            🏁
                            <a href="https://github.com/btholt/citr-v9-project/tree/master/01-no-frills-react">Click
                                here to
                                see the
                                state of the project up until
                                now: 01-no-frills-react</a>
                        </p>
                    </blockquote>
                </div>
            </section>

            <!-- Vite Setup Section -->
            <section id="vite-setup" class="section">
                <div class="section-header">
                    <h1 class="section-title">Vite Build Tool Setup</h1>
                    <p class="section-subtitle">Modern build tooling for React development</p>
                </div>

                <div class="lesson-content">
                    <h2>Vite</h2>
                    <p>The build tool we are going to be using today is called <a href="https://vitejs.dev/">Vite</a>.
                        Vite
                        (pronounced
                        "veet", meaning quick in French) is a tool put out by the Vue team that ultimately ends up
                        wrapping
                        <a href="https://www.rollupjs.org/">Rollup</a> which does the actual bundling. The end result is
                        a
                        tool
                        that is
                        both easy to use and produces a great end result.
                    </p>
                    <blockquote>
                        <p>Fun fact: there's a new project being developed called <a
                                href="https://rolldown.rs/">Rolldown</a> which
                            is
                            written in Rust and aims to replace Rollup.</p>
                    </blockquote>
                    <p>Our end result that we want from a build tool is that</p>
                    <ul>
                        <li>We can separate files out for code organization and have a tool stitch them together for us
                        </li>
                        <li>We can include external, third-party libraries from npm (like React!)</li>
                        <li>The tool will optimize the code for us by minifying and other optimizing techniques</li>
                    </ul>
                    <p>Previous versions of this course used <a href="https://parceljs.org/">Parcel</a>, another tool
                        near-and-dear
                        to
                        my heart. It is still an amazing tool and one I recommend you check out. We ended up moving to
                        Vite
                        because
                        the
                        React community has selected it as the tool-of-choice for the moment and this course aims to
                        give
                        you the
                        community norms of React. Even older versions of this course previously taught <a
                            href="https://webpack.js.org/">Webpack</a>.</p>
                    <p>First, let's install the things we need for Vite.</p>
                    <pre><code class="hljs language-bash">npm install -D vite@5.4.2 @vitejs/plugin-react@4.3.1
</code></pre>
                    <p>The former is the tool itself and the latter is all the React specific features we will need. Now
                        that we
                        have
                        those installed, we need to modify our index.html just a little bit.</p>
                    <pre><code class="hljs language-html"><span class="hljs-comment">&lt;!-- delete the two unpkg script lines --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"module"</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"./src/App.js"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre>
                    <p>We need to add module to the script tag so that the browser knows it's working with modern
                        browser
                        technology
                        that allows you in development mode to use modules directly. Instead of having to reload the
                        whole
                        bundle
                        every
                        time, your browser can just reload the JS that has changed. It allows the browser to crawl the
                        dependency
                        graph
                        itself which means Vite can run lightning fast in dev mode. It will still package it up for
                        production so we
                        can
                        support a range of browsers.</p>
                    <p>Next, let's make our config file. Make a file in the root of your project called
                        <code>vite.config.js</code>
                        and
                        stick this in there:
                    </p>
                    <pre><code class="hljs language-javascript"><span class="hljs-keyword">import</span> { defineConfig } <span class="hljs-keyword">from</span> <span class="hljs-string">"vite"</span>;
<span class="hljs-keyword">import</span> react <span class="hljs-keyword">from</span> <span class="hljs-string">"@vitejs/plugin-react"</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title function_">defineConfig</span>({
<span class="hljs-attr">plugins</span>: [<span class="hljs-title function_">react</span>()],
});
</code></pre>
                    <p>By default, Vite will look for the index.html file in the root directory and treat it as the head
                        of
                        a source
                        graph. It'll crawl all your HTML, CSS, and JavaScript you link to from there and create your
                        project
                        for
                        you. We
                        don't have to do any more configuration than that. Vite will take care of the rest.</p>
                    <p>Okay, let's <em>actually</em> install React to our project.</p>
                    <pre><code class="hljs language-bash">npm install react@18.3.1 react-dom@18.3.1
</code></pre>
                    <ul>
                        <li>We did not include the <code>-D</code> because React is not a development tool, it's a
                            production
                            dependency
                        </li>
                        <li>React and ReactDOM are versioned together so you can assume those versions will always be
                            the
                            same</li>
                    </ul>
                    <p>Finally, head to App.js and modify the following</p>
                    <pre><code class="hljs language-javascript"><span class="hljs-comment">// add to the top</span>
<span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span> <span class="hljs-keyword">from</span> <span class="hljs-string">"react"</span>;
<span class="hljs-keyword">import</span> { createRoot } <span class="hljs-keyword">from</span> <span class="hljs-string">"react-dom/client"</span>;

<span class="hljs-comment">// modify the createRoot call, delete "ReactDOM"</span>
<span class="hljs-keyword">const</span> root = <span class="hljs-title function_">createRoot</span>(container);
</code></pre>
                    <p>Now let's set up our scripts to start Vite. In package.json, put:</p>
                    <pre><code class="hljs language-json"><span class="hljs-comment">// inside scripts</span>
<span class="hljs-attr">"dev"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"vite"</span><span class="hljs-punctuation">,</span>
<span class="hljs-attr">"build"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"vite build"</span><span class="hljs-punctuation">,</span>
<span class="hljs-attr">"preview"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"vite preview"</span>
</code></pre>
                    <p>Be sure to also add <code>"type: module"</code> to your package.json. Vite has deprecated support
                        for
                        Common.js
                        and now requires you to use ESM style modules.</p>
                    <blockquote>
                        <p>Note: you will get a warning from Vite like
                            <code>Files in the public directory are served at the root path. Instead of /public/style.css, use /style.css.</code>
                            – ignore this, we'll fix it in a bit.
                        </p>
                    </blockquote>
                    <p><code>dev</code> will start the development server, typically on <a
                            href="http://localhost:5173/">http://localhost:5173/</a>. <code>build</code> will prepare
                        static
                        files
                        to be
                        deployed (to somewhere like GitHub Pages, Vercel, Netlify, AWS S3, etc.) <code>preview</code>
                        lets
                        you
                        preview
                        your production build locally.</p>
                    <blockquote>
                        <p>Note that we've changed domains here. By default Vite uses localhost:5173. Fun fact, 5173
                            sort of
                            spells
                            VITE
                            if you make the 5 its Roman Numeral version, V.</p>
                    </blockquote>
                    <h2>Alternatives</h2>
                    <p>There are a myriad of fantastic developer tools out there available. We chose Vite because the
                        industry has
                        been
                        using it for a while but I have zero problem with you selecting other tools. Just trying to
                        expose
                        everyone
                        to
                        great tools.</p>
                    <p>In particular, <a href="https://esbuild.github.io/">esbuild</a> is a wonderful tool to take a
                        look at
                        as
                        well.
                    </p>
                    <blockquote>
                        <p>🏁 <a href="https://github.com/btholt/citr-v9-project/tree/master/02-tools">Click here to see
                                the
                                state
                                of
                                the project up until now: 02-tools</a>.</p>
                    </blockquote>
                </div>
            </section>

            <!-- JSX Section -->
            <section id="jsx" class="section">
                <div class="section-header">
                    <h1 class="section-title">JSX Syntax</h1>
                    <p class="section-subtitle">Writing HTML-like syntax in JavaScript</p>
                </div>

                <div class="lesson-content">
                    <h2>JSX</h2>
                    <p>So far we've been writing React without JSX, something that I don't know anyone that actually
                        does
                        with their
                        apps. <em>Everyone</em> uses JSX. I've shown you the <code>createElement</code> way so you'll
                        understand
                        what
                        JSX is actually doing. It doesn't do hardly anything. It just makes your code a bit more
                        readable.
                    </p>
                    <p>If I write <code>React.createElement("h1", { id: "main-title" }, "My Website");</code>, what am I
                        actually
                        trying
                        to have rendered out? <code>&lt;h1 id="main-title"&gt;My Website&lt;/h1&gt;</code>, right? What
                        JSX
                        tries to
                        do
                        is to shortcut this translation layer in your brain so you can just write what you mean.</p>
                    <p>Make a new file called Pizza.jsx.</p>
                    <blockquote>
                        <p>Make sure you call it <code>.jsx</code> and not <code>.js</code>. Vite won't do JSX
                            transpilation
                            if it's
                            not
                            named with a JSX file extension.</p>
                    </blockquote>
                    <pre><code class="hljs language-javascript"><span class="hljs-keyword">const</span> <span class="hljs-title function_">Pizza</span> = (<span class="hljs-params">props</span>) =&gt; {
<span class="hljs-keyword">return</span> (
<span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"pizza"</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>{props.name}<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>{props.description}<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
);
};

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title class_">Pizza</span>;
</code></pre>
                    <p>I don't know about you, but I find this far more readable. And if it feels uncomfortable to you
                        to
                        introduce
                        HTML
                        into your JavaScript, I invite you to give it a shot until the end of the workshop. By then it
                        should feel a
                        bit
                        more comfortable. And you can always go back to the old way.</p>
                    <p>However, now you know <em>what</em> JSX is doing for you. It's just translating those HTML tags
                        into
                        <code>React.createElement</code> calls. <em>That's it.</em> Really. No more magic here. JSX does
                        nothing
                        else.
                        Many people who learn React don't learn this.
                    </p>
                    <p>Notice the strange <code>{props.name}</code> syntax: this is how you output JavaScript
                        expressions in
                        JSX. An
                        expression is anything that can be the right side of an assignment operator in JavaScript, e.g.
                        <code>const x = &lt;anything that can go here&gt;</code>. If you take away the <code>{}</code>
                        it
                        will
                        literally
                        output <code>props.name</code> to the DOM.
                    </p>
                    <blockquote>
                        <p>Notice we don't have to do <code>import React from 'react'</code> here like we used to. The
                            latest
                            version of
                            JSX handles that for you so you only need to explicitly import the React package when you
                            need
                            to use
                            something from it; otherwise feel free to do JSX without having to import React!</p>
                    </blockquote>
                    <h2>ESLint</h2>
                    <p>Let's fix our ESLint as JSX adds new twists and turns we need help with. Please install</p>
                    <pre><code class="hljs language-bash">npm i -D eslint-plugin-react@7.37.1
</code></pre>
                    <p>Then in your eslint.config.mjs</p>
                    <pre><code class="hljs language-javascript"><span class="hljs-comment">// at top, import the ESLint reactPlugin</span>
<span class="hljs-keyword">import</span> reactPlugin <span class="hljs-keyword">from</span> <span class="hljs-string">"eslint-plugin-react"</span>;

<span class="hljs-comment">// under js.configs.recommended line</span>
{
...reactPlugin.<span class="hljs-property">configs</span>.<span class="hljs-property">flat</span>.<span class="hljs-property">recommended</span>,
<span class="hljs-attr">settings</span>: {
<span class="hljs-attr">react</span>: {
<span class="hljs-attr">version</span>: <span class="hljs-string">"detect"</span>,
},
},
},
reactPlugin.<span class="hljs-property">configs</span>.<span class="hljs-property">flat</span>[<span class="hljs-string">"jsx-runtime"</span>],

<span class="hljs-comment">// add to files</span>
<span class="hljs-attr">files</span>: [<span class="hljs-string">"**/*.js"</span>, <span class="hljs-string">"**/*.jsx"</span>], <span class="hljs-comment">// add JSX</span>

<span class="hljs-comment">//after the languageOptions object:</span>
<span class="hljs-attr">rules</span>: {
<span class="hljs-string">"react/no-unescaped-entities"</span>: <span class="hljs-string">"off"</span>,
<span class="hljs-string">"react/prop-types"</span>: <span class="hljs-string">"off"</span>,
},
</code></pre>
                    <p>You can also copy fill config from <a
                            href="https://github.com/btholt/citr-v9-project/blob/main/03-jsx/eslint.config.mjs">the
                            repo</a>.</p>
                    <p>We have to add two configs, one to allow ESLint to understand React and add some basic React
                        rules,
                        and one
                        to
                        modernize it as React 17 changed a bit how ESLint interacts with React.</p>
                    <p>We're also turning off two rules that I don't find particularly useful: unescaped entities (which
                        make you
                        change
                        things like <code>'</code> into <code>&amp;apos</code>) and prop types which no one has used in
                        a
                        decade at
                        this
                        point. Otherwise we should be good to go.</p>
                    <h2>Back to JSX</h2>
                    <p>So now JSX is demystified a bit, let's go convert App.js.</p>
                    <pre><code class="hljs language-javascript"><span class="hljs-comment">// rename the file App.jsx</span>
<span class="hljs-comment">// delete the React import</span>
<span class="hljs-keyword">import</span> { createRoot } <span class="hljs-keyword">from</span> <span class="hljs-string">"react-dom/client"</span>;
<span class="hljs-keyword">import</span> <span class="hljs-title class_">Pizza</span> <span class="hljs-keyword">from</span> <span class="hljs-string">"./Pizza"</span>;

<span class="hljs-comment">// delete the Pizza component</span>

<span class="hljs-keyword">const</span> <span class="hljs-title function_">App</span> = (<span class="hljs-params"></span>) =&gt; {
<span class="hljs-keyword">return</span> (
<span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>Padre Gino's Pizza – Order Now<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">Pizza</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"Pepperoni"</span> <span class="hljs-attr">description</span>=<span class="hljs-string">"Mozzarella Cheese, Pepperoni"</span> /&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">Pizza</span>
<span class="hljs-attr">name</span>=<span class="hljs-string">"The Hawaiian Pizza"</span>
<span class="hljs-attr">description</span>=<span class="hljs-string">"Sliced Ham, Pineapple, Mozzarella Cheese"</span>
/&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">Pizza</span>
<span class="hljs-attr">name</span>=<span class="hljs-string">"The Big Meat Pizza"</span>
<span class="hljs-attr">description</span>=<span class="hljs-string">"Bacon, Pepperoni, Italian Sausage, Chorizo Sausage"</span>
/&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
);
};

<span class="hljs-keyword">const</span> container = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">"root"</span>);
<span class="hljs-keyword">const</span> root = <span class="hljs-title function_">createRoot</span>(container);
root.<span class="hljs-title function_">render</span>(<span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">App</span> /&gt;</span></span>);
</code></pre>
                    <p>Also head over to index.html and change the script tag</p>
                    <pre><code class="hljs language-html"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"module"</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"./src/App.jsx"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre>
                    <p>Notice we have Pizza as a component. Notice that the <code>P</code> in <code>Pizza</code> is
                        capitalized. It
                        <em>must</em> be. If you make it lowercase, it will try to have <code>pizza</code> as a web
                        component and
                        not a
                        React component.
                    </p>
                    <p>We now pass props down as we add attributes to an HTML tag. Pretty cool.</p>
                    <p>You can test your app by running <code>npm run dev</code> and opening the URL shown in the
                        terminal.
                        It's
                        typically <a href="http://localhost:5173/">http://localhost:5173/</a></p>
                    <h2>The API / Image Server</h2>
                    <p>For this course we will use a little Fastify server I built for you. It's in the <a
                            href="https://github.com/btholt/citr-v9-project/tree/main/api">api</a> directory. We are
                        going
                        to use
                        Vite.js to proxy to this API server. This is a useful trick to do for local development if you
                        have
                        a
                        separate
                        frontend in a backend. Normally you'd have something like NGINX routing traffic to separate
                        frontend
                        and
                        backend
                        servers. For now we'll just use Vite.</p>
                    <blockquote>
                        <p>Note: This means you'll need to have TWO terminal windows running. One terminal for the API
                            server (which
                            you
                            won't have to touch once it's running). The other terminal is is our Vite server for our web
                            app.</p>
                    </blockquote>
                    <p>Add this to you vite.config.js</p>
                    <pre><code class="hljs language-javascript"><span class="hljs-comment">// replace export</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title function_">defineConfig</span>({
<span class="hljs-attr">server</span>: {
<span class="hljs-attr">proxy</span>: {
<span class="hljs-string">"/api"</span>: {
<span class="hljs-attr">target</span>: <span class="hljs-string">"http://localhost:3000"</span>,
<span class="hljs-attr">changeOrigin</span>: <span class="hljs-literal">true</span>,
},
<span class="hljs-string">"/public"</span>: {
<span class="hljs-attr">target</span>: <span class="hljs-string">"http://localhost:3000"</span>,
<span class="hljs-attr">changeOrigin</span>: <span class="hljs-literal">true</span>,
},
},
},
<span class="hljs-attr">plugins</span>: [<span class="hljs-title function_">react</span>()],
});
</code></pre>
                    <h2>Run the API Server</h2>
                    <p>If you didn't do this earlier in the course, download or clone <a
                            href="https://github.com/btholt/citr-v9-project">the citr-v9-project repo</a>. You only need
                        the
                        <code>api</code> directory for the API server.
                    </p>
                    <p>Open a new terminal and navigate to the <code>api</code> directory. Note that this server is
                        <em>outside</em>
                        your project directory.
                    </p>
                    <p>Using <strong>Node 20 or higher</strong>, go into the <code>api</code> directory, install the
                        dependencies,
                        and
                        run the server:</p>
                    <pre><code class="hljs language-bash"><span class="hljs-built_in">cd</span> citr-v9-project/api
npm install
npm run dev
</code></pre>
                    <p>The server should start on port 3000. To verify it's working, visit <a
                            href="http://localhost:3000/api/pizzas">http://localhost:3000/api/pizzas</a> and you should
                        see
                        the
                        pizza
                        JSON data.</p>
                    <p>You need both servers running at the same time. With the Vite proxy configuration from above,
                        your
                        Vite
                        server
                        will intercept <code>api</code> and <code>public</code> calls in the React application and
                        reroute
                        them to
                        your
                        API server!</p>
                    <p>Now let's add images to our Pizza.</p>
                    <pre><code class="hljs language-javascript"><span class="hljs-comment">// return inside Pizza, inside div, under &lt;p&gt;</span>
&lt;img src={props.<span class="hljs-property">image</span>} alt={props.<span class="hljs-property">name</span>} /&gt;
</code></pre>
                    <p>Now in App.jsx</p>
                    <pre><code class="hljs language-javascript"><span class="hljs-comment">// add to first Pizza</span>
image={<span class="hljs-string">"/public/pizzas/pepperoni.webp"</span>}

<span class="hljs-comment">// add to second Pizza</span>
image={<span class="hljs-string">"/public/pizzas/hawaiian.webp"</span>}

<span class="hljs-comment">// add to third Pizza</span>
image={<span class="hljs-string">"/public/pizzas/big_meat.webp"</span>}
</code></pre>
                    <p>And now you should have images!</p>
                    <blockquote>
                        <p>🏁 <a href="https://github.com/btholt/citr-v9-project/tree/master/03-jsx">Click here to see
                                the
                                state of
                                the
                                project up until now: 03-jsx</a></p>
                    </blockquote>
                </div>
            </section>

            <!-- Hooks Section -->
            <section id="hooks" class="section">
                <div class="section-header">
                    <h1 class="section-title">React Hooks</h1>
                    <p class="section-subtitle">Managing state and side effects in functional components</p>
                </div>

                <div class="lesson-content">
                    <h2>Hooks</h2>
                    <p>Okay, so now we want to make it so people can add pizzas to their order. We need a little form
                        that
                        allows
                        them
                        to select the pizza and the size. Create a new file called Order.jsx and add the following:</p>
                    <pre><code class="hljs language-javascript"><span class="hljs-keyword">import</span> <span class="hljs-title class_">Pizza</span> <span class="hljs-keyword">from</span> <span class="hljs-string">"./Pizza"</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">Order</span>(<span class="hljs-params"></span>) {
<span class="hljs-keyword">const</span> pizzaType = <span class="hljs-string">"pepperoni"</span>;
<span class="hljs-keyword">const</span> pizzaSize = <span class="hljs-string">"M"</span>;
<span class="hljs-keyword">return</span> (
<span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"order"</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>Create Order<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">form</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">label</span> <span class="hljs-attr">htmlFor</span>=<span class="hljs-string">"pizza-type"</span>&gt;</span>Pizza Type<span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">select</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"pizza-type"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">{pizzaType}</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">option</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"pepperoni"</span>&gt;</span>The Pepperoni Pizza<span class="hljs-tag">&lt;/<span class="hljs-name">option</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">option</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"hawaiian"</span>&gt;</span>The Hawaiian Pizza<span class="hljs-tag">&lt;/<span class="hljs-name">option</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">option</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"big_meat"</span>&gt;</span>The Big Meat Pizza<span class="hljs-tag">&lt;/<span class="hljs-name">option</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">select</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">label</span> <span class="hljs-attr">htmlFor</span>=<span class="hljs-string">"pizza-size"</span>&gt;</span>Pizza Size<span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">input</span>
<span class="hljs-attr">checked</span>=<span class="hljs-string">{pizzaSize</span> === <span class="hljs-string">"S"</span>}
<span class="hljs-attr">type</span>=<span class="hljs-string">"radio"</span>
<span class="hljs-attr">name</span>=<span class="hljs-string">"pizza-size"</span>
<span class="hljs-attr">value</span>=<span class="hljs-string">"S"</span>
<span class="hljs-attr">id</span>=<span class="hljs-string">"pizza-s"</span>
/&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">label</span> <span class="hljs-attr">htmlFor</span>=<span class="hljs-string">"pizza-s"</span>&gt;</span>Small<span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">input</span>
<span class="hljs-attr">checked</span>=<span class="hljs-string">{pizzaSize</span> === <span class="hljs-string">"M"</span>}
<span class="hljs-attr">type</span>=<span class="hljs-string">"radio"</span>
<span class="hljs-attr">name</span>=<span class="hljs-string">"pizza-size"</span>
<span class="hljs-attr">value</span>=<span class="hljs-string">"M"</span>
<span class="hljs-attr">id</span>=<span class="hljs-string">"pizza-m"</span>
/&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">label</span> <span class="hljs-attr">htmlFor</span>=<span class="hljs-string">"pizza-m"</span>&gt;</span>Medium<span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">input</span>
<span class="hljs-attr">checked</span>=<span class="hljs-string">{pizzaSize</span> === <span class="hljs-string">"L"</span>}
<span class="hljs-attr">type</span>=<span class="hljs-string">"radio"</span>
<span class="hljs-attr">name</span>=<span class="hljs-string">"pizza-size"</span>
<span class="hljs-attr">value</span>=<span class="hljs-string">"L"</span>
<span class="hljs-attr">id</span>=<span class="hljs-string">"pizza-l"</span>
/&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">label</span> <span class="hljs-attr">htmlFor</span>=<span class="hljs-string">"pizza-l"</span>&gt;</span>Large<span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"submit"</span>&gt;</span>Add to Cart<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"order-pizza"</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">Pizza</span>
<span class="hljs-attr">name</span>=<span class="hljs-string">"Pepperoni"</span>
<span class="hljs-attr">description</span>=<span class="hljs-string">"Mozzarella Cheese, Pepperoni"</span>
<span class="hljs-attr">image</span>=<span class="hljs-string">"/public/pizzas/pepperoni.webp"</span>
/&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>$13.37<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">form</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
);
}
</code></pre>
                    <p>Now add it to your App.jsx:</p>
                    <pre><code class="hljs language-javascript"><span class="hljs-comment">// delete Pizza import, and add Order</span>
<span class="hljs-keyword">import</span> <span class="hljs-title class_">Order</span> <span class="hljs-keyword">from</span> <span class="hljs-string">"./Order"</span>;

<span class="hljs-comment">// in App.jsx, replace all the Pizzas</span>
<span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">Order</span> /&gt;</span></span>
</code></pre>
                    <blockquote>
                        <p>🚨 You'll have some errors in the console, that's okay.</p>
                    </blockquote>
                    <p>Now navigate to <a href="http://localhost:5173/">http://localhost:5173/</a> and see that you have
                        two
                        inputs,
                        one
                        for the pizza type and a set of radio buttons for the size. Try and select something with the
                        inputs. You'll
                        see
                        that you can't modify them. Why? Let's think about how React works: when you interact with the
                        inputs, React
                        detects that a DOM event happens. When that happens, React thinks <em>something</em> may have
                        changed so it
                        runs
                        a re-render. Providing your render functions are fast, this is a very quick operation. It then
                        diffs
                        what's
                        currently there and what its render pass came up with. It then updates the minimum amount of DOM
                        necessary.
                    </p>
                    <blockquote>
                        <p>In the recorded course, the layout is vertical because the <code>order-pizza</code> DIV was
                            in
                            the wrong
                            place. Use the markup above. The layout should look like this:</p>
                    </blockquote>
                    <p><img src="/images/order-page-layout.webp" alt="Order Page Layout"></p>
                    <p>Notice we're using <code>className</code> instead of <code>class</code> on the HTML element for
                        CSS
                        classes.
                        This
                        is because <code>class</code> is a reserved word in JS and JSX is still just JS. So instead they
                        opted to
                        use
                        <code>className</code> which is the <a
                            href="https://developer.mozilla.org/en-US/docs/Web/API/Element/className">name of the JS
                            API</a>
                        for
                        interacting with class names.
                    </p>
                    <p>Like <code>className</code>, <code>htmlFor</code> is used because <code>for</code> is a reserved
                        word
                        in JS.
                    </p>
                    <p>So if we type in our input and it re-renders, what gets out in the <code>select</code> or radio
                        button tags?
                        Well, its value is tied to <code>pizzaType</code> and <code>pizzaSize</code> and nothing changed
                        those, so
                        they
                        remain the same. In other words, two way data binding is <em>not</em> free in React. I say this
                        is a
                        feature
                        because it makes you explicit on how you handle your data. Let's go make it work.</p>
                    <pre><code class="hljs language-javascript"><span class="hljs-comment">// in Order.jsx</span>
<span class="hljs-keyword">import</span> { useState } <span class="hljs-keyword">from</span> <span class="hljs-string">"react"</span>;

<span class="hljs-comment">// pizzaType and pizzaSize location</span>
<span class="hljs-keyword">const</span> [pizzaType, setPizzaType] = <span class="hljs-title function_">useState</span>(<span class="hljs-string">"pepperoni"</span>);
<span class="hljs-keyword">const</span> [pizzaSize, setPizzaSize] = <span class="hljs-title function_">useState</span>(<span class="hljs-string">"medium"</span>);

<span class="hljs-comment">// replace input</span>
<span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">select</span>
<span class="hljs-attr">onChange</span>=<span class="hljs-string">{(e)</span> =&gt;</span> setPizzaType(e.target.value)}
name="pizza-type"
value={pizzaType}
&gt;
[…]
<span class="hljs-tag">&lt;/<span class="hljs-name">select</span>&gt;</span></span>

<span class="hljs-comment">// add to all the radio buttons</span>
onChange={<span class="hljs-function">(<span class="hljs-params">e</span>) =&gt;</span> <span class="hljs-title function_">setPizzaSize</span>(e.<span class="hljs-property">target</span>.<span class="hljs-property">value</span>)}
</code></pre>
                    <ul>
                        <li>This is called a hook. Other frameworks like Vue have adopted it as well.</li>
                        <li>A hook called such (in my head) because it's a hook that gets caught every time the render
                            function gets
                            called. Because the hooks get called in the same order every single time, they'll always
                            point
                            to the
                            same
                            piece of state. Because of that they can be stateful: you can keep pieces of mutable state
                            using
                            hooks
                            and
                            then modify them later using their provided updater functions.</li>
                        <li>An <em>absolutely key</em> concept for you to grasp is hooks rely on this strict ordering.
                            As
                            such,
                            <strong>do not put hooks inside if statements or loops</strong>. If you do, you'll have
                            insane
                            bugs that
                            involve <code>useState</code> returning <em>the wrong state</em>. If you see
                            <code>useState</code>
                            returning
                            the wrong piece of state, this is likely what you did. Every hook must run every time in the
                            same order.
                        </li>
                        <li>The argument given to <code>useState</code> is the default value. In our case, we could give
                            it
                            <code>""</code> as our default value to make the user have to select something first but in
                            our
                            case we
                            want
                            to default to pepperoni pizza and medium size.
                        </li>
                        <li><code>useState</code> returns to us an array with two things in it: the current value of
                            that
                            state and
                            a
                            function to update that state. We're using a feature of JavaScript called destructuring to
                            get
                            both of
                            those
                            things out of the array.</li>
                        <li>We use the <code>setPizzaType</code> / <code>setPizzaSize</code> function in the
                            <code>onChange</code>
                            attribute of the input. Every time the input is typed into, it's going to call that
                            functions
                            which call
                            <code>setPizzaType</code> and <code>setPizzaSize</code> with what has been typed into the
                            input
                            or what
                            has
                            been selected or what has been clicked on. When <code>setPizzaType</code> and
                            <code>setPizzaSize</code>
                            are
                            called, React knows that its state has been modified and kicks off a re-render.
                        </li>
                        <li>You can make your own custom hooks; <code>useState</code> is just one of many.</li>
                        <li>Historically, React has been written using classes with state being on the instance of the
                            component.
                            This
                            is still a supported pattern in React. We'll see how to do it later.</li>
                        <li>We could have put an onChange handler on each of the radio buttons. However event bubbling
                            works
                            the
                            same in
                            React as it does in the normal DOM and we could put it directly on the div that encapsulates
                            all
                            the
                            radio
                            buttons and just have to do it once.</li>
                        <li>You can use <code>useState</code> as many times as you need for various pieces of state!
                            Again,
                            this is
                            why
                            ordering is important because React relies on <code>useState</code> to be called in strictly
                            the
                            same
                            order
                            every time so it can give you the same piece of state.</li>
                        <li>Similar to above. We're using <code>onChange</code> because it makes it more accessible.
                        </li>
                    </ul>
                    <blockquote>
                        <p>I'm showing you how to do a "controlled form" in that we're using hooks to control each part
                            of
                            the form.
                            In
                            reality, it'd be better to leave these <em>uncontrolled</em> (aka don't set the value) and
                            wrap
                            the
                            whole
                            thing in a form. Then we can listen for submit events and use that event to gather info off
                            the
                            form.
                            This
                            is less code and less burdensome to write. If you have a standard form sort of thing to
                            write,
                            do that
                            as an
                            uncontrolled form. If you need to do dynamic validation, react to a user typing a la
                            typeahead
                            (functionality that provides real-time suggestions), or something of the ilk, then a
                            controlled
                            input is
                            perfect, otherwise stick to uncontrolled.
                            Also what's new in React is called a "form action" that is considered unstable. In the
                            future
                            you will
                            just
                            add <code>&lt;form action="blah"&gt;[…]&lt;/form&gt;</code> and a form action will handle
                            the
                            entire
                            form
                            for you.</p>
                    </blockquote>
                    <p>Another side note: event bubbling in React works just like you would expect. In theory you can
                        have
                        mega
                        event
                        handler in React but the lint rules and React's dev tools get noisy about it if you do it that
                        way
                        so I tend
                        to
                        just follow their recommendation.</p>
                    <pre><code class="hljs language-javascript"><span class="hljs-comment">// you could replace the div surrounding the radio buttons and remove all the onChange handlers</span>
&lt;div onChange={<span class="hljs-function">(<span class="hljs-params">e</span>) =&gt;</span> <span class="hljs-title function_">setPizzaSize</span>(e.<span class="hljs-property">target</span>.<span class="hljs-property">value</span>)}&gt;[…]&lt;/div&gt;
</code></pre>
                    <blockquote>
                        <p>🏁 <a href="https://github.com/btholt/citr-v9-project/tree/main/04-hooks">Click here to see
                                the
                                state of
                                the
                                project up until now: 04-hooks</a></p>
                    </blockquote>
                </div>
            </section>

            <!-- Effects Section -->
            <section id="effects" class="section">
                <div class="section-header">
                    <h1 class="section-title">useEffect Hook</h1>
                    <p class="section-subtitle">Handling side effects and API calls</p>
                </div>

                <div class="lesson-content">
                    <h2>Effects</h2>
                    <p>We have enough of an app to start making some API requests now. We want the app to request an
                        initial
                        set of
                        pizzaTypes on initial load of the page. So let's make that happen using a special hook called
                        <code>useEffect</code>. <code>useEffect</code> allows you to say do a render of this component
                        first
                        so the
                        user
                        can see <em>something</em> then as soon as the render is done, <em>then</em> do something (the
                        something
                        here
                        being an effect). In our case, we want the user to see our UI first then we want to make a
                        request
                        to the
                        API so
                        we can initialize a list of pizzas.
                    </p>
                    <blockquote>
                        <p>Make sure you have both your Vite dev server running <em>and</em> your API server running.
                            Both.
                        </p>
                    </blockquote>
                    <p>Let's refactor Order.jsx</p>
                    <pre><code class="hljs language-javascript"><span class="hljs-comment">// change import at top</span>
<span class="hljs-keyword">import</span> { useEffect, useState } <span class="hljs-keyword">from</span> <span class="hljs-string">"react"</span>;
<span class="hljs-keyword">import</span> <span class="hljs-title class_">Pizza</span> <span class="hljs-keyword">from</span> <span class="hljs-string">"./Pizza"</span>;

<span class="hljs-comment">// outside of the render function</span>
<span class="hljs-comment">// feel free to change en-US / USD to your locale</span>
<span class="hljs-keyword">const</span> intl = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Intl</span>.<span class="hljs-title class_">NumberFormat</span>(<span class="hljs-string">"en-US"</span>, {
<span class="hljs-attr">style</span>: <span class="hljs-string">"currency"</span>,
<span class="hljs-attr">currency</span>: <span class="hljs-string">"USD"</span>,
});

<span class="hljs-comment">// add to the other useStates inside component at top</span>
<span class="hljs-keyword">const</span> [pizzaTypes, setPizzaTypes] = <span class="hljs-title function_">useState</span>([]);
<span class="hljs-keyword">const</span> [loading, setLoading] = <span class="hljs-title function_">useState</span>(<span class="hljs-literal">true</span>);

<span class="hljs-keyword">let</span> price, selectedPizza;
<span class="hljs-keyword">if</span> (!loading) {
selectedPizza = pizzaTypes.<span class="hljs-title function_">find</span>(<span class="hljs-function">(<span class="hljs-params">pizza</span>) =&gt;</span> pizzaType === pizza.<span class="hljs-property">id</span>);
price = intl.<span class="hljs-title function_">format</span>(
selectedPizza.<span class="hljs-property">sizes</span> ? selectedPizza.<span class="hljs-property">sizes</span>[pizzaSize] : <span class="hljs-string">""</span>
);
}

<span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
<span class="hljs-title function_">fetchPizzaTypes</span>();
}, []);

<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">fetchPizzaTypes</span>(<span class="hljs-params"></span>) {
<span class="hljs-keyword">await</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve</span>) =&gt;</span> <span class="hljs-built_in">setTimeout</span>(resolve, <span class="hljs-number">3000</span>)); <span class="hljs-comment">// remove this later, just to show you the loading state</span>

<span class="hljs-keyword">const</span> pizzasRes = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetch</span>(<span class="hljs-string">"/api/pizzas"</span>);
<span class="hljs-keyword">const</span> pizzasJson = <span class="hljs-keyword">await</span> pizzasRes.<span class="hljs-title function_">json</span>();
<span class="hljs-title function_">setPizzaTypes</span>(pizzasJson);
<span class="hljs-title function_">setLoading</span>(<span class="hljs-literal">false</span>);
}

<span class="hljs-comment">// replace the options</span>
{
pizzaTypes.<span class="hljs-title function_">map</span>(<span class="hljs-function">(<span class="hljs-params">pizza</span>) =&gt;</span> (
<span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">option</span> <span class="hljs-attr">key</span>=<span class="hljs-string">{pizza.id}</span> <span class="hljs-attr">value</span>=<span class="hljs-string">{pizza.id}</span>&gt;</span>
{pizza.name}
<span class="hljs-tag">&lt;/<span class="hljs-name">option</span>&gt;</span></span>
));
}

<span class="hljs-comment">// replace &lt;Pizza /&gt; and button at the end</span>
</code></pre>
                    <ul>
                        <li>We put all the logic for fetching pizza types in an async function to make it more readable.
                            You
                            can't
                            make
                            the function provided to useEffect async.</li>
                        <li>the <code>[]</code> at the end of the useEffect is where you declare your data dependencies.
                            React wants
                            to
                            know <em>when</em> to run that effect again. You don't give it data dependencies, it assumes
                            any
                            time
                            any
                            hook changes that you should run the effect again. This is bad because that would mean any
                            time
                            setPizzaTypes gets called it'd re-run render and all the hooks again. See a problem there?
                            It'd
                            run
                            infinitely since fetchPizzaTypes calls setPizzaTypes.</li>
                        <li>You can instead provide which hooks to watch for changes for. In our case, we actually only
                            want
                            it to
                            run
                            once, on creation of the component, and then to not run that effect again. (we'll do
                            searching
                            later via
                            clicking the submit button) You can accomplish this only-run-on-creation by providing an
                            empty
                            array.
                        </li>
                        <li>We're using a loading flag to only display data once it's ready. We'll use TanStack Query in
                            a
                            bit to
                            make
                            this code look cleaner. But this is how you do conditional showing/hiding of components in
                            React.</li>
                        <li>The <code>key</code> portion is an interesting one. When React renders arrays of things, it
                            doesn't know
                            the
                            difference between something is new and something is just being re-ordered in the array
                            (think
                            like
                            changing
                            the sorting of a results list, like price high-to-low and then priced low-to-high). Because
                            of
                            this, if
                            you
                            don't tell React how to handle those situations, it just tears it all down and re-renders
                            everything
                            anew.
                            This can cause unnecessary slowness on devices. This is what key is for. Key tells React
                            "this
                            is a
                            simple
                            identifier of what this component is". If React sees you just moved a key to a different
                            order,
                            it will
                            keep
                            the component tree. So key here is to associate the key to something unique about that
                            component. 99/100
                            this is a database ID of some variety. <em>Don't</em> use the index of the array as that
                            just
                            isn't
                            right
                            unless the array is literally is never going to change order.</li>
                    </ul>
                    <h3>Updating the Selected Pizza &amp; Price</h3>
                    <p>When a pizza is selected, we need to update the selected pizza and price. First, let's format the
                        price after
                        the
                        <code>selectedPizza</code> state is updated:
                    </p>
                    <pre><code class="hljs language-javascript">  <span class="hljs-keyword">if</span>(!loading){
selectedPizza = pizzaTypes.<span class="hljs-title function_">find</span>(<span class="hljs-function">(<span class="hljs-params">pizza</span>) =&gt;</span> pizzaType === pizza.<span class="hljs-property">id</span>)
price = intl.<span class="hljs-title function_">format</span>(selectedPizza.<span class="hljs-property">sizes</span>[pizzaSize])
}
</code></pre>
                    <p>When the application loads, we don't have our data yet. So we only want to render a selected
                        pizza
                        and price
                        once
                        we are done loading. Add a condition to the JSX to show "Loading..." initially, and then the
                        selected pizza
                        once
                        we are done loading. Add the condition <strong>before</strong> the closing
                        <code>&lt;/form&gt;</code> tag:
                    </p>
                    <pre><code class="hljs language-jsx">...
{
loading ? (
<span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">h3</span>&gt;</span>Loading...<span class="hljs-tag">&lt;/<span class="hljs-name">h3</span>&gt;</span></span>
) : (
<span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"order-pizza"</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">Pizza</span>
<span class="hljs-attr">name</span>=<span class="hljs-string">{selectedPizza.name}</span>
<span class="hljs-attr">description</span>=<span class="hljs-string">{selectedPizza.description}</span>
<span class="hljs-attr">image</span>=<span class="hljs-string">{selectedPizza.image}</span>
/&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>{price}<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
)
}
&lt;/form&gt;
</code></pre>
                    <blockquote>
                        <p>🏁 <a href="https://github.com/btholt/citr-v9-project/tree/master/05-effects">Click here to
                                see
                                the state
                                of
                                the project up until now: 05-effects</a></p>
                    </blockquote>
                </div>
            </section>

            <!-- custom hooks  -->
            <section id="custom-hooks" class="section">
                <div class="section-header">
                    <h1 class="section-title">Custom Hooks</h1>
                    <p class="section-subtitle">Creating reusable logic with custom hooks</p>
                </div>
                <div class="lesson-content">
                    <h2>Custom Hooks</h2>
                    <p>One thing that's pretty special about hooks is their composability. You can use hooks to make
                        other
                        hooks! People
                        tend to call these custom hooks. There are even people who go as far to say "never make an API
                        request in a
                        component, always do it in a hook." I don't know if I'm as hardcore as that but I see the logic
                        in
                        it. If you
                        make a custom hook for those sorts of things they become individually testable and do a good job
                        to
                        separate
                        your display of data and your logic to acquire data. I'm more in the camp of make custom hooks
                        for
                        either
                        complicated logic or reusable logic, but for simple cases it's okay to keep things simple.</p>
                    <p>Okay, so we want to add a "Pizza of the Day" banner at the bottom of our page. This necessitates
                        calling a
                        special API to get the pizza of the day (which should change every day based on your computer's
                        time.) Let's
                        first write the component that's going to use it.</p>
                    <p>Make a file called PizzaOfTheDay.jsx</p>
                    <pre><code class="hljs language-javascript"><span class="hljs-keyword">import</span> { usePizzaOfTheDay } <span class="hljs-keyword">from</span> <span class="hljs-string">"./usePizzaOfTheDay"</span>;

<span class="hljs-comment">// feel free to change en-US / USD to your locale</span>
<span class="hljs-keyword">const</span> intl = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Intl</span>.<span class="hljs-title class_">NumberFormat</span>(<span class="hljs-string">"en-US"</span>, {
<span class="hljs-attr">style</span>: <span class="hljs-string">"currency"</span>,
<span class="hljs-attr">currency</span>: <span class="hljs-string">"USD"</span>,
});

<span class="hljs-keyword">const</span> <span class="hljs-title function_">PizzaOfTheDay</span> = (<span class="hljs-params"></span>) =&gt; {
<span class="hljs-keyword">const</span> pizzaOfTheDay = <span class="hljs-title function_">usePizzaOfTheDay</span>();

<span class="hljs-keyword">if</span> (!pizzaOfTheDay) {
<span class="hljs-keyword">return</span> <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>Loading...<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>;
}

<span class="hljs-keyword">return</span> (
<span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"pizza-of-the-day"</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>Pizza of the Day<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"pizza-of-the-day-info"</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">h3</span>&gt;</span>{pizzaOfTheDay.name}<span class="hljs-tag">&lt;/<span class="hljs-name">h3</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>{pizzaOfTheDay.description}<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"pizza-of-the-day-price"</span>&gt;</span>
From: <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>{intl.format(pizzaOfTheDay.sizes.S)}<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">img</span>
<span class="hljs-attr">className</span>=<span class="hljs-string">"pizza-of-the-day-image"</span>
<span class="hljs-attr">src</span>=<span class="hljs-string">{pizzaOfTheDay.image}</span>
<span class="hljs-attr">alt</span>=<span class="hljs-string">{pizzaOfTheDay.name}</span>
/&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
);
};

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title class_">PizzaOfTheDay</span>;
</code></pre>
                    <ul>
                        <li>The cool part here is the <code>usePizzaOfTheDay()</code>. We now just get to rely on that
                            this
                            going to
                            provide us with the pizza of the day from within the black box of the hook working.</li>
                    </ul>
                    <p>Okay, let's go make the hook! Make a file called usePizzaOfTheDay.jsx (you could call this .js
                        instead of jsx but
                        in a React project I just use JSX for all "React-y" things)</p>
                    <pre><code class="hljs language-javascript"><span class="hljs-keyword">import</span> { useState, useEffect } <span class="hljs-keyword">from</span> <span class="hljs-string">"react"</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title function_">usePizzaOfTheDay</span> = (<span class="hljs-params"></span>) =&gt; {
<span class="hljs-keyword">const</span> [pizzaOfTheDay, setPizzaOfTheDay] = <span class="hljs-title function_">useState</span>(<span class="hljs-literal">null</span>);

<span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">fetchPizzaOfTheDay</span>(<span class="hljs-params"></span>) {
<span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetch</span>(<span class="hljs-string">"/api/pizza-of-the-day"</span>);
<span class="hljs-keyword">const</span> data = <span class="hljs-keyword">await</span> response.<span class="hljs-title function_">json</span>();
<span class="hljs-title function_">setPizzaOfTheDay</span>(data);
}

<span class="hljs-title function_">fetchPizzaOfTheDay</span>();
}, []);

<span class="hljs-keyword">return</span> pizzaOfTheDay;
};
</code></pre>
                    <ul>
                        <li>This looks like what you'd see at the top of a component, right? Now it's just encapsulated
                            as a
                            hook which
                            makes it easy to test by itself! 🎉</li>
                        <li>We can use <code>useState</code>, <code>useEffect</code>, or any hook we want here! We can
                            even
                            use other
                            custom hooks!</li>
                    </ul>
                    <p>Lastly, let's go add this to App.jsx so our component renders.</p>
                    <pre><code class="hljs language-javascript"><span class="hljs-comment">// import at top</span>
<span class="hljs-keyword">import</span> <span class="hljs-title class_">PizzaOfTheDay</span> <span class="hljs-keyword">from</span> <span class="hljs-string">"./PizzaOfTheDay"</span>;

<span class="hljs-comment">// under &lt;Order /&gt;</span>
<span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">PizzaOfTheDay</span> /&gt;</span></span>
</code></pre>
                    <p>You should now see the new component which uses our new hook at the bottom!</p>
                    <p>Let's add one more fun debugging technique made especially for custom hooks. Put this in
                        usePizzaOfTheDay.jsx:
                    </p>
                    <pre><code class="hljs language-javascript"><span class="hljs-comment">// import useDebugValue</span>
<span class="hljs-keyword">import</span> { useState, useEffect, useDebugValue } <span class="hljs-keyword">from</span> <span class="hljs-string">"react"</span>;

<span class="hljs-comment">// add under the hook being used in the render function</span>
<span class="hljs-title function_">useDebugValue</span>(pizzaOfTheDay ? <span class="hljs-string">`<span class="hljs-subst">${pizzaOfTheDay.name}</span>`</span> : <span class="hljs-string">"Loading..."</span>);
</code></pre>
                    <p>Now open your React Dev Tools and inspect our PizzaOfTheDay component. You'll see our debug value
                        there. This is
                        helpful when you have <em>lots</em> of custom hooks and in particular lots of reused custom
                        hooks
                        that have
                        differing values. It can help at a glance to discern which hook has which data inside of it.</p>
                    <blockquote>
                        <p>🏁 <a href="https://github.com/btholt/citr-v9-project/tree/master/06-custom-hooks">Click here
                                to
                                see the
                                state of the project up until now: 06-custom-hooks</a></p>
                    </blockquote>
                </div>
            </section>

            <!-- Handling user input -->
            <section id="user-input" class="section">
                <div class="section-header">
                    <h1 class="section-title">Handling User Input</h1>
                    <p class="section-subtitle">Managing user input and form submission</p>
                </div>
                <div class="lesson-content">
                    <h2>Handling User Input</h2>
                    <p>So now we want to be able to handle the user's cart and submitting our order. Let's go add what
                        we need to
                        Order.jsx</p>
                    <pre><code class="hljs language-javascript"><span class="hljs-comment">// add import</span>
<span class="hljs-keyword">import</span> <span class="hljs-title class_">Cart</span> <span class="hljs-keyword">from</span> <span class="hljs-string">"./Cart"</span>;

<span class="hljs-comment">// add another hook</span>
<span class="hljs-keyword">const</span> [cart, setCart] = <span class="hljs-title function_">useState</span>([]);

<span class="hljs-comment">// replace &lt;form&gt;</span>
<span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">form</span>
<span class="hljs-attr">onSubmit</span>=<span class="hljs-string">{(e)</span> =&gt;</span> {
e.preventDefault();
setCart([...cart, { pizza: selectedPizza, size: pizzaSize, price }]);
}}
&gt;
[…]
<span class="hljs-tag">&lt;/<span class="hljs-name">form</span>&gt;</span></span>;

<span class="hljs-comment">// just inside the last closing div</span>
{
loading ? <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>LOADING …<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span></span> : <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">Cart</span> <span class="hljs-attr">cart</span>=<span class="hljs-string">{cart}</span> /&gt;</span></span>
}
</code></pre>
                    <p>So now we're using an onSubmit to handle the adding to cart. Awesome! Then we're passing that
                        into Cart to have a
                        nice display.</p>
                    <p>Let's make the cart. Make a file called Cart.jsx and add</p>
                    <pre><code class="hljs language-javascript"><span class="hljs-keyword">const</span> intl = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Intl</span>.<span class="hljs-title class_">NumberFormat</span>(<span class="hljs-string">"en-US"</span>, {
<span class="hljs-attr">style</span>: <span class="hljs-string">"currency"</span>,
<span class="hljs-attr">currency</span>: <span class="hljs-string">"USD"</span>, <span class="hljs-comment">// feel free to change to your local currency</span>
});

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">Cart</span>(<span class="hljs-params">{ cart, checkout }</span>) {
<span class="hljs-keyword">let</span> total = <span class="hljs-number">0</span>;
<span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; cart.<span class="hljs-property">length</span>; i++) {
<span class="hljs-keyword">const</span> current = cart[i];
total += current.<span class="hljs-property">pizza</span>.<span class="hljs-property">sizes</span>[current.<span class="hljs-property">size</span>];
}
<span class="hljs-keyword">return</span> (
<span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"cart"</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>Cart<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">ul</span>&gt;</span>
{cart.map((item, index) =&gt; (
<span class="hljs-tag">&lt;<span class="hljs-name">li</span> <span class="hljs-attr">key</span>=<span class="hljs-string">{index}</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"size"</span>&gt;</span>{item.size}<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span> –
<span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"type"</span>&gt;</span>{item.pizza.name}<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span> –
<span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"price"</span>&gt;</span>{item.price}<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
))}
<span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>Total: {intl.format(total)}<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{checkout}</span>&gt;</span>Checkout<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
);
}
</code></pre>
                    <blockquote>
                        <p>Normally doing key this way is a bad idea, but we wouldn't reorganize this list, nor care if
                            it rerendered
                            anyway, so it gets a pass.</p>
                    </blockquote>
                    <p>Now we have a nice shopping cart experience. So how do actually checkout on the server? Let's do
                        that! We
                        probably want to do it as the Order level. It already has the Cart and we can just leave the
                        Cart as a dumb
                        display component. We can just pass a function to call into the Cart component and call it and
                        run the function
                        at the Order level.</p>
                    <pre><code class="hljs language-javascript"><span class="hljs-comment">// inside the render body</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">checkout</span>(<span class="hljs-params"></span>) {
<span class="hljs-title function_">setLoading</span>(<span class="hljs-literal">true</span>);

<span class="hljs-keyword">await</span> <span class="hljs-title function_">fetch</span>(<span class="hljs-string">"/api/order"</span>, {
<span class="hljs-attr">method</span>: <span class="hljs-string">"POST"</span>,
<span class="hljs-attr">headers</span>: {
<span class="hljs-string">"Content-Type"</span>: <span class="hljs-string">"application/json"</span>,
},
<span class="hljs-attr">body</span>: <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>({
cart,
}),
});

<span class="hljs-title function_">setCart</span>([]);
<span class="hljs-title function_">setLoading</span>(<span class="hljs-literal">false</span>);
}

<span class="hljs-comment">// replace Cart</span>
&lt;<span class="hljs-title class_">Cart</span> checkout={checkout} cart={cart} /&gt;;
</code></pre>
                    <p>Now we can pass that checkout function in and whenever someone clicks inside the form, it will
                        run the checkout
                        function from the Order components. We're doing a simple loading animation, doing a fetch, and
                        then clearing the
                        status once we're all done. Not too bad!</p>
                    <blockquote>
                        <p>🏁 <a href="https://github.com/btholt/citr-v9-project/tree/master/07-handling-forms">Click
                                here to see the
                                state of the project up until now: 07-handling-forms</a></p>
                    </blockquote>
                </div>
            </section>

            <!-- context -->
            <section id="context" class="section">
                <div class="section-header">
                    <h1 class="section-title">Context</h1>
                    <p class="section-subtitle">Managing global state with Context API</p>
                </div>
                <div class="lesson-content">
                    <h2>Context</h2>
                    <p>Let's make a cart indicator on the top right of the page. Create a file called Header.jsx and put
                        this in there.
                    </p>
                    <pre><code class="hljs language-javascript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">Header</span>(<span class="hljs-params"></span>) {
    <span class="hljs-keyword">return</span> (
        <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">nav</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">h1</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"logo"</span>&gt;</span>Padre Gino's Pizza<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"nav-cart"</span>&gt;</span>
                    🛒<span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"nav-cart-number"</span>&gt;</span>5<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
                <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">nav</span>&gt;</span></span>
        );
    }
</code></pre>
                    <p>Now let's use that in App.jsx</p>
                    <pre><code class="hljs language-javascript"><span class="hljs-comment">// at top</span>
<span class="hljs-keyword">import</span> <span class="hljs-title class_">Header</span> <span class="hljs-keyword">from</span> <span class="hljs-string">"./Header"</span>;

<span class="hljs-comment">// replace .logo</span>
<span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">Header</span> /&gt;</span></span>
</code></pre>
                    <p>Right now this will always show 5 but we want that number in .nav-cart-number to reflect how many
                        items we have
                        in our cart. How would we do that? We could move all of cart and its hooks to App.jsx and pass
                        it into both
                        Header and Order. In an app this small, that could be the right choice. But let's look at
                        another way to do it,
                        context.</p>
                    <p>Context is for app-level state. This is state that exists for your entire app. The currently
                        logged in user would
                        be a good example of this. You wouldn't want the user to exist in just the page level because
                        once you navigate
                        to another page, all state of the previous page is destroyed. You'd want that user info to
                        persist between
                        pages, and thus context is a good thing for that. Context allows you to keep a global state for
                        your app. We're
                        going to use it for the shopping cart which actually makes good sense: if a user navigates to
                        another page,
                        you'd want to keep their shopping cart between loads. This is a good way to think about when you
                        may want to use
                        context: if you want that stage to persist between pages.</p>
                    <p>So let's make it work. Make a file called <code>contexts.jsx</code>. It's not a component so I
                        tend to not
                        capitalize it. The React docs do capitalize it. Up to you.</p>
                    <pre><code class="hljs language-javascript"><span class="hljs-keyword">import</span> { createContext } <span class="hljs-keyword">from</span> <span class="hljs-string">"react"</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title class_">CartContext</span> = <span class="hljs-title function_">createContext</span>([[], <span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) {}]);
</code></pre>
                    <p>That's it. Pretty simple. It's called contexts with an <code>s</code> because if you had other
                        contexts (like a
                        UserContext) you could put those all in the same file. The <code>[[], function () {}]</code>
                        isn't strictly
                        necessary; it's a default value your context would use if no context provider is there (which
                        should never
                        happen.) This really only ends up being useful for TypeScript types – the type you give here is
                        what TypeScript
                        will use to validate it. In theory it could be helpful for testing too. The reason for the weird
                        value is that
                        it's a React hook: an array where the first value is an array (like our cart is) and the second
                        value is a
                        function (the setCart function).</p>
                    <p>Okay, let's go put it in App.jsx.</p>
                    <pre><code class="hljs language-javascript"><span class="hljs-comment">// at the top</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">StrictMode</span>, useState } <span class="hljs-keyword">from</span> <span class="hljs-string">"react"</span>; <span class="hljs-comment">// need useState</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">CartContext</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"./contexts"</span>;

<span class="hljs-comment">// replace App</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">App</span> = (<span class="hljs-params"></span>) =&gt; {
<span class="hljs-keyword">const</span> cartHook = <span class="hljs-title function_">useState</span>([]);
<span class="hljs-keyword">return</span> (
<span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">StrictMode</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">CartContext.Provider</span> <span class="hljs-attr">value</span>=<span class="hljs-string">{cartHook}</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">Header</span> /&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">Order</span> /&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">PizzaOfTheDay</span> /&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">CartContext.Provider</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">StrictMode</span>&gt;</span></span>
);
};
</code></pre>
                    <p>We're creating a hook (notice we are not destructuring) and passing that in as the value. The
                        Provider makes that
                        context available only inside of its children. In theory you could have multiple providers from
                        the same context
                        but honestly I've never had a reason to do it.</p>
                    <p>Alright, let's go make Order.jsx work now.</p>
                    <pre><code class="hljs language-javascript"><span class="hljs-comment">// at top</span>
<span class="hljs-keyword">import</span> { useState, useEffect, useContext } <span class="hljs-keyword">from</span> <span class="hljs-string">"react"</span>; <span class="hljs-comment">// need useContext</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">CartContext</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"./contexts"</span>;

<span class="hljs-keyword">const</span> [cart, setCart] = <span class="hljs-title function_">useContext</span>(<span class="hljs-title class_">CartContext</span>); <span class="hljs-comment">// change cart hook to use context</span>
</code></pre>
                    <p>That's it! Everything else works the same. In our case we're just using a hook directly from
                        context, but you can
                        put anything in context; it doesn't have to be a hook.</p>
                    <p>Let's go use it in our Header now too.</p>
                    <pre><code class="hljs language-javascript"><span class="hljs-comment">// at top</span>
<span class="hljs-keyword">import</span> { useContext } <span class="hljs-keyword">from</span> <span class="hljs-string">"react"</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">CartContext</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"./contexts"</span>;

<span class="hljs-comment">// top of function</span>
<span class="hljs-keyword">const</span> [cart] = <span class="hljs-title function_">useContext</span>(<span class="hljs-title class_">CartContext</span>);

<span class="hljs-comment">// replace span number</span>
🛒&lt;span className=<span class="hljs-string">"nav-cart-number"</span>&gt;{cart.<span class="hljs-property">length</span>}&lt;/span&gt;
</code></pre>
                    <p>That's it! We don't need the setCart function so we don't import that. Otherwise all looks pretty
                        normal!</p>
                    <p>So that's context. It's super useful for stuff like this where we don't want to "prop drill" our
                        state
                        everywhere. Since cart is now being held at the App level, we definitely could have just said
                        <code>&lt;Header cart={cart} /&gt;</code> and called it a day, and in this specific use case I
                        would have. But
                        now imagine if Header was super deeply nested and you had to pass that state down a lot of
                        children components –
                        it gets messy quickly. This is what we call prop drilling. React's explicit data flow is a
                        feature, not a bug.
                        It makes where data came from and where data is going very readable. But it can make your code
                        verbose in a
                        non-helpful way, and context is an escape hatch for that. In general, use context sparingly and
                        only where it's
                        <em>really</em> inconvenient to just do it the normal way of using props.
                    </p>
                    <blockquote>
                        <p>🏁 <a href="https://github.com/btholt/citr-v9-project/tree/master/08-context">Click here to
                                see the state of
                                the project up until now: 08-context</a></p>
                    </blockquote>
                </div>
            </section>

    </main>

    <script>
        // Mobile sidebar toggle
        function toggleSidebar() {
            const sidebar = document.getElementById('sidebar');
            sidebar.classList.toggle('open');
        }

        // Close sidebar when clicking on main content on mobile
        document.addEventListener('click', function (e) {
            const sidebar = document.getElementById('sidebar');
            const toggle = document.querySelector('.sidebar-toggle');

            if (window.innerWidth <= 768 &&
                !sidebar.contains(e.target) &&
                !toggle.contains(e.target) &&
                sidebar.classList.contains('open')) {
                sidebar.classList.remove('open');
            }
        });

        // Highlight active section in sidebar
        function updateActiveSection() {
            const sections = document.querySelectorAll('.section');
            const tocLinks = document.querySelectorAll('.toc-main, .toc-subsection');

            let activeSection = null;

            sections.forEach(section => {
                const rect = section.getBoundingClientRect();
                if (rect.top <= 100 && rect.bottom >= 100) {
                    activeSection = section.id;
                }
            });

            tocLinks.forEach(link => {
                link.classList.remove('active');
                if (activeSection && link.getAttribute('href') === '#' + activeSection) {
                    link.classList.add('active');
                }
            });
        }

        // Update active section on scroll
        window.addEventListener('scroll', updateActiveSection);

        // Initial update
        updateActiveSection();
    </script>
</body>

</html>